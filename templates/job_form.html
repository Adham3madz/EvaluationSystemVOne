{% extends "layout.html" %}
{% block title %}{{ action }} ÙˆØ¸ÙŠÙØ©{% endblock %}

{% block content %}
<style>
    /* === Modern Container === */
    .form-container {
        max-width: 800px;
        margin: 40px auto;
        background: #ffffff;
        border-radius: 16px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.06);
        overflow: hidden;
        font-family: "Tajawal", "Cairo", sans-serif;
    }

    /* === Header === */
    .form-header {
        background: linear-gradient(135deg, #004d7a, #00608f);
        padding: 30px;
        text-align: center;
        color: white;
    }
    .form-header h3 { margin: 0; font-weight: 800; font-size: 24px; letter-spacing: 0.5px; }

    /* === Body === */
    .form-body { padding: 40px; }

    /* === Inputs === */
    .form-label {
        font-weight: 700;
        color: #2c3e50;
        margin-bottom: 8px;
        display: block;
        font-size: 14px;
    }

    .form-control, .form-select {
        width: 100%;
        padding: 12px 15px;
        border-radius: 10px;
        border: 1px solid #dee2e6;
        background-color: #fdfdfd;
        font-size: 15px;
        transition: all 0.3s ease;
    }

    .form-control:focus, .form-select:focus {
        border-color: #004d7a;
        box-shadow: 0 0 0 4px rgba(0, 77, 122, 0.1);
        outline: none;
        background-color: #fff;
    }

    textarea.form-control { min-height: 100px; resize: vertical; }

    /* === Grid Layout === */
    .row-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 20px;
    }
    @media (max-width: 768px) { .row-grid { grid-template-columns: 1fr; } }

    /* === Buttons === */
    .form-footer {
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px dashed #ddd;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .btn-save {
        padding: 12px 35px;
        background: linear-gradient(135deg, #2e7d32, #1b5e20);
        color: white; border: none; border-radius: 50px;
        font-weight: 800; font-size: 16px;
        box-shadow: 0 4px 15px rgba(46, 125, 50, 0.2);
        transition: 0.3s; cursor: pointer;
        display: inline-flex; align-items: center; gap: 8px;
    }
    .btn-save:hover { transform: translateY(-2px); background: linear-gradient(135deg, #388e3c, #2e7d32); }

    .btn-back { color: #7f8c8d; text-decoration: none; font-weight: 600; font-size: 14px; }
    .btn-back:hover { color: #333; }
</style>

<div class="form-container">
    
    <div class="form-header">
        <h3>
            <i class="fa-solid fa-briefcase"></i> 
            {{ 'Ù†Ø´Ø± ÙˆØ¸ÙŠÙØ© Ø¬Ø¯ÙŠØ¯Ø©' if action == 'Add' else 'ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙØ©' }}
        </h3>
    </div>
    
    <div class="form-body">
        <form method="POST">
            
            <div class="mb-4">
                <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙˆØ¸ÙŠÙØ© (Job Title)</label>
                <input type="text" name="title" class="form-control" value="{{ job.JobTitle if job else '' }}" required placeholder="Ù…Ø«Ø§Ù„: Ù…Ø¯ÙŠØ± Ù…Ø¨ÙŠØ¹Ø§Øª">
            </div>

            <div class="row-grid">
                <div>
                    <label class="form-label">Ø§Ù„Ù‚Ø³Ù…</label>
                    <select name="dept_id" class="form-select">
                        {% for d in depts %}
                        <option value="{{ d.DEPTID }}" {% if job and job.DepartmentID == d.DEPTID %}selected{% endif %}>{{ d.DEPTNAME }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <label class="form-label">Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</label>
                    <input type="text" name="salary" class="form-control" placeholder="Ù…Ø«Ø§Ù„: 5000 - 7000" value="{{ job.SalaryRange if job else '' }}">
                </div>
            </div>

            <div class="mb-4">
                <label class="form-label">Ø§Ù„ÙˆØµÙ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</label>
                <textarea name="description" class="form-control" rows="4" placeholder="Ø§ÙƒØªØ¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙˆØ¸ÙŠÙØ©...">{{ job.Description if job else '' }}</textarea>
            </div>

            <div class="mb-4">
                <label class="form-label">Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª (Requirements)</label>
                <textarea name="requirements" class="form-control" rows="3" placeholder="Ø§Ù„Ù…Ø¤Ù‡Ù„Ø§Øª ÙˆØ§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©...">{{ job.Requirements if job else '' }}</textarea>
            </div>

            <div class="row-grid">
                <div>
                    <label class="form-label">Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ (Deadline)</label>
                    <input type="date" name="deadline" class="form-control" value="{{ job.Deadline if job else '' }}">
                </div>

                {% if action == 'Edit' %}
                <div>
                    <label class="form-label">Ø§Ù„Ø­Ø§Ù„Ø©</label>
                    <select name="status" class="form-select">
                        <option value="Active" {% if job.Status=='Active' %}selected{% endif %}>ğŸŸ¢ Ù†Ø´Ø·Ø© (Active)</option>
                        <option value="Paused" {% if job.Status=='Paused' %}selected{% endif %}>ğŸŸ  Ù…ÙˆÙ‚ÙˆÙØ© (Paused)</option>
                        <option value="Closed" {% if job.Status=='Closed' %}selected{% endif %}>ğŸ”´ Ù…ØºÙ„Ù‚Ø© (Closed)</option>
                    </select>
                </div>
                {% endif %}
            </div>

            <div class="form-footer">
                <a href="{{ url_for('job_list') }}" class="btn-back">
                    <i class="fa-solid fa-arrow-right"></i> Ø¥Ù„ØºØ§Ø¡ ÙˆØ§Ù„Ø¹ÙˆØ¯Ø©
                </a>
                <button type="submit" class="btn-save">
                    <i class="fa-solid fa-floppy-disk"></i> {{ 'Ù†Ø´Ø± Ø§Ù„ÙˆØ¸ÙŠÙØ©' if action == 'Add' else 'Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª' }}
                </button>
            </div>

        </form>
    </div>
</div>
{% endblock %}