{% extends "layout.html" %}
{% block title %}إدارة الأسباب التفصيلية{% endblock %}

{% block content %}
<style>
    /* نفس تنسيق القوائم الأخرى */
    body { direction: rtl; background-color: #f8fafc; font-family: "Cairo", sans-serif; }
    .page-header { text-align: center; margin-bottom: 25px; }
    .page-header h2 { color: #1a237e; font-weight: 700; }
    .action-bar { display: flex; justify-content: space-between; margin: 0 auto 15px auto; max-width: 950px; padding: 0 10px; }
    .card { background: #fff; border-radius: 14px; padding: 20px; max-width: 950px; margin: 0 auto; box-shadow: 0 3px 10px rgba(0,0,0,0.07); }
    table { width: 100%; border-collapse: collapse; text-align: center; margin-top: 10px; }
    th { background: #1565c0; color: #fff; padding: 12px 10px; }
    td { padding: 12px 10px; border-bottom: 1px solid #ddd; }
    .btn { padding: 8px 14px; border-radius: 8px; text-decoration: none; color: white; border: none; cursor: pointer; }
    .btn-success { background: #2e7d32; }
    .btn-warning { background: #ffc107; color: #212529; font-size: 13px; padding: 5px 10px; }
    .btn-danger { background: #dc3545; font-size: 13px; padding: 5px 10px; }
</style>

<div class="page-header">
    <h2>❓ إدارة الأسباب التفصيلية (Why)</h2>
</div>

<div class="action-bar">
    <h3 style="color: #0d47a1;">القائمة</h3>
    <a href="{{ url_for('whys_add') }}" class="btn btn-success">+ إضافة سبب تفصيلي</a>
</div>

<div class="card">
    <table>
        <thead>
            <tr>
                <th style="width: 15%;">الرقم</th>
                <th>النص (Why)</th>
                <th style="width: 25%;">الإجراءات</th>
            </tr>
        </thead>
        <tbody>
            {% for w in whys %}
            <tr>
                <td>{{ w.WhyID }}</td>
                <td>{{ w.WhyText }}</td>
                <td>
                    <a href="{{ url_for('whys_edit', wid=w.WhyID) }}" class="btn btn-warning">تعديل</a>
                    <form method="POST" action="{{ url_for('whys_delete', wid=w.WhyID) }}"
                          onsubmit="return confirm('هل أنت متأكد من الحذف؟');" style="display:inline;">
                        <button type="submit" class="btn btn-danger">حذف</button>
                    </form>
                </td>
            </tr>
            {% else %}
            <tr><td colspan="3" style="color:#666;">لا توجد أسباب مضافة حالياً</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}