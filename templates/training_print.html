<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ÙƒØ´Ù Ø­Ø¶ÙˆØ± ØªØ¯Ø±ÙŠØ¨ÙŠ - {{ training_session.TrainingCourseText }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cairo.css') }}">

    <style>
        body { 
            font-family: 'Cairo', sans-serif; 
            background: white; 
            color: black; 
            line-height: 1.7;
            padding: 20px;
        }
        
        .header { 
            text-align: center; 
            border-bottom: 3px double #000; 
            padding-bottom: 20px; 
            margin-bottom: 30px; 
        }
        
        .header h1 { 
            font-size: 28px; 
            font-weight: 900; 
            margin: 0; 
        }
        
        .header h3 { 
            font-size: 20px; 
            margin: 10px 0 0; 
            font-weight: 700; 
        }
        
        .meta-info { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 20px; 
            margin: 30px 0; 
            padding: 20px; 
            border: 2px solid #333; 
            border-radius: 10px; 
            background-color: #f8f9fa; 
        }
        
        .meta-item { 
            text-align: right; 
        }
        
        .meta-item strong { 
            display: inline-block; 
            width: 100px; 
            font-weight: 800; 
        }
        
        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin: 30px 0; 
            font-size: 15px; 
        }
        
        th, td { 
            border: 1.5px solid #000; 
            padding: 14px 10px; 
            text-align: center; 
            vertical-align: middle; 
        }
        
        th { 
            background-color: #e9ecef; 
            font-weight: 900; 
            font-size: 16px; 
        }
        
        .signature-section { 
            display: flex; 
            justify-content: space-between; 
            margin-top: 80px; 
            padding-top: 30px; 
            border-top: 1px solid #000; 
        }
        
        .signature-box { 
            text-align: center; 
            width: 45%; 
        }
        
        .signature-box p { 
            margin: 40px 0 10px; 
            font-weight: bold; 
            font-size: 16px; 
        }
        
        .signature-line { 
            border-bottom: 1px solid #000; 
            width: 80%; 
            margin: 0 auto; 
        }
        
        @media print { 
            @page { size: A4 portrait; margin: 15mm; }
            body { padding: 10px; }
            .no-print { display: none !important; }
        }
    </style>
</head>
<body>

    <div class="no-print text-center mb-4">
        <button onclick="window.print()" class="btn btn-success btn-lg px-5">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙƒØ´Ù</button>
        &nbsp;
        <a href="{{ url_for('training_session_detail', sid=training_session.SessionID) }}" class="btn btn-secondary btn-lg">Ø±Ø¬ÙˆØ¹</a>
    </div>

    <div class="header">
        <h1>ÙƒØ´Ù Ø­Ø¶ÙˆØ± Ø¯ÙˆØ±Ø© ØªØ¯Ø±ÙŠØ¨ÙŠØ©</h1>
        <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ ÙˆØ§Ù„ØªØ·ÙˆÙŠØ±</h3>
    </div>

    <div class="meta-info">
        <div class="meta-item"><strong>Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©:</strong> {{ training_session.TrainingCourseText }}</div>
        <div class="meta-item"><strong>Ø§Ù„Ù…Ø¯Ø±Ø¨(ÙˆÙ†):</strong> {{ trainer_display }}</div>
        <div class="meta-item"><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©:</strong> {{ training_session.SessionDate.strftime('%d/%m/%Y') }}</div>
        <div class="meta-item"><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡:</strong> 
            {% if training_session.EndDate %}
                {{ training_session.EndDate.strftime('%d/%m/%Y') }}
            {% else %}
                Ù†ÙØ³ ÙŠÙˆÙ… Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
            {% endif %}
        </div>
        <div class="meta-item"><strong>Ø§Ù„Ù…ÙƒØ§Ù†:</strong> {{ training_session.Location or 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯' }}</div>
        <div class="meta-item"><strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø§Ø¶Ø±ÙŠÙ†:</strong> {{ enrollments|length }} Ù…ØªØ¯Ø±Ø¨</div>
    </div>

    <table>
        <thead>
            <tr>
                <th style="width: 8%;">Ù…</th>
                <th style="width: 35%;">Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¯Ø±Ø¨</th>
                <th style="width: 25%;">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© / Ø§Ù„Ù‚Ø³Ù…</th>
                <th style="width: 15%;">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</th>
                <th style="width: 17%;">Ø§Ù„ØªÙˆÙ‚ÙŠØ¹</th>
            </tr>
        </thead>
        <tbody>
            {% for emp in enrollments %}
            <tr style="height: 60px;">
                <td class="fw-bold">{{ loop.index }}</td>
                <td class="fw-bold text-end pe-3">{{ emp.NAME }}</td>
                <td>{{ emp.DEPTNAME or 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯' }}</td>
                <td>{{ emp.BADGENUMBER or '-' }}</td>
                <td></td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5" class="py-5 text-muted">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ØªØ¯Ø±Ø¨ÙŠÙ† Ù…Ø³Ø¬Ù„ÙŠÙ† ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¬Ù„Ø³Ø©.</td>
            </tr>
            {% endfor %}

            <!-- Extra empty rows for manual additions if needed -->
            {% for i in range(8 - (enrollments|length)) %}
            <tr style="height: 60px;">
                <td></td><td></td><td></td><td></td><td></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="signature-section">
        <div class="signature-box">
            <p>ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø¯Ø±Ø¨(ÙŠÙ†)</p>
            <div class="signature-line"></div>
            <p class="mt-2">Ø§Ù„Ø§Ø³Ù…: {{ trainer_display }}</p>
        </div>
        <div class="signature-box">
            <p>Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨</p>
            <div class="signature-line"></div>
            <p class="mt-2">Ø§Ù„Ø§Ø³Ù…: ...............................</p>
        </div>
    </div>

    <div class="text-center mt-5 text-muted small">
    ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©: {{ print_date }}
    </div>

</body>
</html>