{% extends "layout.html" %}
{% block title %}Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ØªØ§Ø­Ø©{% endblock %}

{% block content %}
<style>
    /* Ø®Ù„ÙÙŠØ© Ù‡Ø§Ø¯Ø¦Ø© ÙˆÙ…Ø±ÙŠØ­Ø© */
    body { background: #f8fcff; }

    /* Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø© - Ù„Ø·ÙŠÙ ÙˆÙˆØ§Ø¶Ø­ */
    .page-header {
        text-align: center; padding: 40px 20px; background: linear-gradient(135deg, #e3f2fd, #bbdefb);
        border-radius: 20px; margin-bottom: 40px; box-shadow: 0 8px 25px rgba(0,0,0,0.08);
    }
    .page-header h2 { font-size: 28px; color: #1565c0; margin-bottom: 10px; }
    .page-header p { color: #424242; font-size: 16px; }

    /* Ø²Ø± Ø¥Ø¶Ø§ÙØ© ÙˆØ¸ÙŠÙØ© - Ø¨Ø§Ø±Ø² ÙˆÙˆØ¯ÙˆØ¯ */
    .btn-add {
        background: #4caf50; color: white; padding: 14px 30px; border-radius: 50px;
        font-weight: bold; text-decoration: none; display: inline-flex; align-items: center; gap: 10px;
        box-shadow: 0 6px 15px rgba(76,175,80,0.3); transition: 0.3s;
    }
    .btn-add:hover { background: #43a047; transform: translateY(-3px); color: white; }

    /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙˆØ¸ÙŠÙØ© - Ø¨Ø³ÙŠØ·Ø© ÙˆÙ…Ø±ÙŠØ­Ø© Ù„Ù„Ø¹ÙŠÙ† */
    .job-card {
        background: white; border-radius: 16px; padding: 25px; height: 100%;
        box-shadow: 0 6px 20px rgba(0,0,0,0.06); transition: 0.3s; border: 1px solid #e8f4fd;
    }
    .job-card:hover { transform: translateY(-8px); box-shadow: 0 15px 30px rgba(0,0,0,0.12); }

    /* Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ù„ÙˆÙŠ */
    .status-bar { height: 6px; border-radius: 16px 16px 0 0; margin: -25px -25px 20px -25px; }
    .status-Active { background: #4caf50; }
    .status-Paused { background: #ff9800; }
    .status-Closed { background: #f44336; }

    /* Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙˆØ¸ÙŠÙØ© */
    .job-title { font-size: 20px; font-weight: 800; color: #1e3a8a; margin-bottom: 8px; }

    /* Ø§Ù„Ù‚Ø³Ù… */
    .job-dept { color: #1565c0; font-weight: 600; margin-bottom: 15px; }

    /* Ø§Ù„ØªÙØ§ØµÙŠÙ„ */
    .job-details { font-size: 14px; color: #555; line-height: 1.8; }
    .job-details div { margin-bottom: 8px; }

    /* Ø§Ù„ÙˆØµÙ */
    .job-desc { font-size: 14px; color: #666; margin: 15px 0; line-height: 1.6; }

    /* Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…ÙŠÙ† */
    .applicants {
        font-weight: bold; color: #1565c0; font-size: 15px; margin-top: auto; padding-top: 15px;
        border-top: 1px dashed #e0e0e0;
    }

    /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø³ÙÙ„ÙŠØ© */
    .job-actions { display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap; }
    .btn-small {
        padding: 10px 18px; border-radius: 10px; font-size: 13px; font-weight: bold;
        text-decoration: none; display: inline-flex; align-items: center; gap: 6px;
        transition: 0.2s;
    }
    .btn-view { background: #1565c0; color: white; }
    .btn-view:hover { background: #0d47a1; }
    .btn-edit { background: #fff3e0; color: #ef6c00; border: 1px solid #ffe0b2; }
    .btn-edit:hover { background: #ff9800; color: white; }
    .btn-delete { background: #ffebee; color: #c62828; border: 1px solid #ffcdd2; }
    .btn-delete:hover { background: #f44336; color: white; }

    /* Ø¹Ù†Ø¯Ù…Ø§ Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ¸Ø§Ø¦Ù */
    .no-jobs {
        text-align: center; padding: 80px 20px; color: #78909c;
    }
    .no-jobs-icon { font-size: 80px; margin-bottom: 20px; opacity: 0.4; }
</style>

<!-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø© Ø§Ù„ÙˆØ¯ÙˆØ¯ -->
<div class="page-header">
    <h2>ğŸ“¢ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠÙ‹Ø§</h2>
    <p>Ø§Ø¹Ø±Ø¶ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø´Ø§ØºØ±Ø© ÙˆØªØ§Ø¨Ø¹ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…ÙŠÙ† Ø¨Ø³Ù‡ÙˆÙ„Ø©</p>
    <a href="{{ url_for('job_add') }}" class="btn-add">
        â• Ø¥Ø¶Ø§ÙØ© ÙˆØ¸ÙŠÙØ© Ø¬Ø¯ÙŠØ¯Ø©
    </a>
</div>

<div class="row g-4">
    {% for job in jobs %}
    <div class="col-md-6 col-lg-4">
        <div class="job-card">
            <div class="status-bar status-{{ job.Status }}"></div>

            <div class="job-title">{{ job.JobTitle }}</div>
            <div class="job-dept">ğŸ¢ {{ job.DEPTNAME or 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯' }}</div>

            <div class="job-details">
                <div>ğŸ’° Ø§Ù„Ø±Ø§ØªØ¨: {{ job.SalaryRange or 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯' }}</div>
                <div>ğŸ“… Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: {{ job.Deadline.strftime('%Y-%m-%d') if job.Deadline else 'Ù…ÙØªÙˆØ­' }}</div>
                <div>ğŸ—“ï¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø±: {{ job.PostDate.strftime('%Y-%m-%d') }}</div>
            </div>

            <div class="job-desc">
                {{ job.Description or 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ Ù…ØªØ§Ø­ Ø­Ø§Ù„ÙŠÙ‹Ø§...' }}
            </div>

            <div class="applicants">
                ğŸ‘¥ Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…ÙŠÙ†: <strong>{{ job.ApplicantCount }}</strong>
            </div>

            <div class="job-actions">
                <a href="{{ url_for('recruitment_list', job_id=job.JobID) }}" class="btn-small btn-view">
                    ğŸ‘€ Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…ÙŠÙ†
                </a>
                <a href="{{ url_for('job_edit', jid=job.JobID) }}" class="btn-small btn-edit">
                    âœï¸ ØªØ¹Ø¯ÙŠÙ„
                </a>
                <form action="{{ url_for('job_delete', jid=job.JobID) }}" method="POST" style="display:inline;" onsubmit="return confirm('ğŸš¨ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ©ØŸ');">
                    <button type="submit" class="btn-small btn-delete">
                        ğŸ—‘ï¸ Ø­Ø°Ù
                    </button>
                </form>
            </div>
        </div>
    </div>
    {% else %}
    <div class="col-12">
        <div class="no-jobs">
            <div class="no-jobs-icon">ğŸ’¼</div>
            <h4>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ¸Ø§Ø¦Ù Ù…Ù†Ø´ÙˆØ±Ø© Ø­Ø§Ù„ÙŠÙ‹Ø§</h4>
            <p>ÙƒÙ„ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ù…ØºÙ„Ù‚Ø© Ø£Ùˆ Ù„Ù… ÙŠØªÙ… Ù†Ø´Ø± Ø£ÙŠ ÙˆØ¸ÙŠÙØ© Ø¨Ø¹Ø¯.</p>
            <p>ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø¥Ø¶Ø§ÙØ© ÙˆØ¸ÙŠÙØ© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ ğŸ‘†</p>
        </div>
    </div>
    {% endfor %}
</div>

{% endblock %}