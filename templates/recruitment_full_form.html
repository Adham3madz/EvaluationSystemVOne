{% extends "layout.html" %}
{% block title %}{% if action == 'Add' %}ุฅุถุงูุฉ ูุฑุดุญ ุฌุฏูุฏ โ{% else %}ุชุนุฏูู ูุฑุดุญ โ๏ธ{% endif %}{% endblock %}

{% block content %}
<div class="container-fluid">
    <h4 class="fw-bold mb-4">{% if action == 'Add' %}โ ุฅุถุงูุฉ ูุฑุดุญ ุฌุฏูุฏ{% else %}โ๏ธ ุชุนุฏูู ูุฑุดุญ{% endif %}</h4>

    <div class="card shadow-sm p-4">
        <form method="POST" enctype="multipart/form-data">
            <!-- ุจูุงูุงุช ุฃุณุงุณูุฉ -->
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">ุงูุงุณู ุงููุงูู ๐</label>
                    <input type="text" name="name" class="form-control" required value="{{ candidate.FullName if candidate else '' }}">
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">ุงููุงุชู ๐</label>
                    <input type="text" name="phone" class="form-control" required value="{{ candidate.Phone if candidate else '' }}">
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ๐ง</label>
                    <input type="email" name="email" class="form-control" value="{{ candidate.Email if candidate else '' }}">
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">ุฑูู ุงููููู ๐ข</label>
                    <input type="text" name="ssn" class="form-control" value="{{ candidate.SSN if candidate else '' }}">
                </div>
            </div>

            <!-- ุงููุณู ูุงููุธููุฉ -->
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">ุงููุณู ๐ข</label>
                    <select name="dept_id" class="form-select">
                        <option value="">โ ุนุงู โ</option>
                        {% for d in depts %}
                            <option value="{{ d.DEPTID }}" {% if candidate and candidate.DepartmentID == d.DEPTID %}selected{% endif %}>{{ d.DEPTNAME }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">ุงููุธููุฉ ๐ผ</label>
                    <select name="pos_id" class="form-select">
                        <option value="">โ ุงุฎุชุฑ โ</option>
                        {% for p in positions %}
                            <option value="{{ p.PositionID }}" {% if candidate and candidate.PositionID == p.PositionID %}selected{% endif %}>{{ p.PositionName }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <!-- ุญุงูุฉ ูุชุงุฑูุฎ -->
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">ุงูุญุงูุฉ โ๏ธ</label>
                    <select name="status_id" class="form-select" required>
                        {% for s in statuses %}
                            <option value="{{ s.StatusID }}" {% if candidate and candidate.Status == s.StatusName %}selected{% endif %}>{{ s.StatusName }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">ุชุงุฑูุฎ ุงูุชูุฏูู ๐</label>
                    <input type="date" name="app_date" class="form-control" value="{{ candidate.ApplicationDate if candidate else today }}">
                </div>
            </div>

            <!-- ูุซุงุฆู -->
            <div class="mb-3">
                <label class="form-label">ุงููุซุงุฆู ๐</label>
                <div class="row">
                    <div class="col-md-3 form-check">
                        <input type="checkbox" name="doc_id" id="doc_id" class="form-check-input" {% if candidate and candidate.Doc_IDCard %}checked{% endif %}>
                        <label for="doc_id" class="form-check-label">ุจุทุงูุฉ ุงููููุฉ</label>
                    </div>
                    <!-- ุฃุถู ุจุงูู ุงููุซุงุฆู ุจููุณ ุงูุทุฑููุฉ -->
                </div>
            </div>

            <!-- ุฑูุน ุงูุณูุฑุฉ ุงูุฐุงุชูุฉ -->
            <div class="mb-3">
                <label class="form-label">ุฑูุน ุงูุณูุฑุฉ ุงูุฐุงุชูุฉ ๐ค</label>
                <input type="file" name="cv_file" class="form-control">
                {% if candidate and candidate.CV_FileName %}
                    <small>ุงูุญุงูู: <a href="{{ url_for('static', filename='uploads/cvs/' ~ candidate.CV_FileName) }}" target="_blank">ุชุญููู CV</a></small>
                {% endif %}
            </div>

            <!-- ููุงุจูุงุช -->
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">ููุงุจูุฉ 1 ๐ฅ</label>
                    <input type="text" name="int1_by" class="form-control" placeholder="ุงุณู ุงููุญุงูุฑ" value="{{ candidate.Int1_Interviewer if candidate else '' }}">
                    <input type="date" name="int1_date" class="form-control mt-2" value="{{ candidate.Int1_Date if candidate else '' }}">
                    <textarea name="int1_note" class="form-control mt-2" placeholder="ููุงุญุธุงุช">{% if candidate %}{{ candidate.Int1_Notes }}{% endif %}</textarea>
                </div>
                <!-- ููุงุจูุฉ 2 ุจููุณ ุงูุทุฑููุฉ -->
            </div>

            <!-- ุชูููู -->
            <div class="row">
                <div class="col-md-3 mb-3">
                    <label class="form-label">ุชูููู ููู โญ</label>
                    <input type="number" name="eval_tech" class="form-control" min="0" max="100" value="{{ candidate.Eval_Technical if candidate else 0 }}">
                </div>
                <!-- ุจุงูู ุงูุชููููุงุช -->
            </div>

            <button type="submit" class="btn btn-success">๐พ ุญูุธ</button>
            <a href="{{ url_for('recruitment_list') }}" class="btn btn-secondary">๐ ุฑุฌูุน</a>
        </form>
    </div>
</div>
{% endblock %}